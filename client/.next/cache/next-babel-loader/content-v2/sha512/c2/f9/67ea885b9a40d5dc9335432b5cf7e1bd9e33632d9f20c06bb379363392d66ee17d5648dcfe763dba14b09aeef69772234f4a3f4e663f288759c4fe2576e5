{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"/Users/rjb/Desktop/code/projects/rfp/client/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/rjb/Desktop/code/projects/rfp/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"/Users/rjb/Desktop/code/projects/rfp/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nvar _jsxFileName = \"/Users/rjb/Desktop/code/projects/rfp/client/components/auth/signup-basic.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useState, Fragment, useEffect } from \"react\";\nimport { Form, Message } from \"semantic-ui-react\";\nimport { useRequest } from \"../../hooks/use-request\";\nimport { useRouter } from \"next/router\";\nimport Link from \"next/link\";\n\nvar Signup = function Signup(_ref) {\n  _s();\n\n  var createSitePermission = _ref.createSitePermission;\n\n  var _useState = useState({\n    email: \"\",\n    password: \"\",\n    success: false,\n    loading: false,\n    agreeTos: false\n  }),\n      values = _useState[0],\n      setValues = _useState[1];\n\n  var email = values.email,\n      password = values.password,\n      success = values.success,\n      loading = values.loading,\n      agreeTos = values.agreeTos;\n\n  var _useRequest = useRequest({\n    url: \"/api/users/signup/\".concat(useRouter().query.site),\n    // MUST CHANGE\n    method: \"post\",\n    body: {\n      email: email,\n      password: password,\n      createSitePermission: createSitePermission\n    }\n  }),\n      doRequest = _useRequest.doRequest,\n      errors = _useRequest.errors;\n\n  var handleChange = function handleChange(name) {\n    return function (e) {\n      setValues(_objectSpread(_objectSpread({}, values), {}, _defineProperty({}, name, e.target.value)));\n    };\n  };\n\n  var clickSubmit = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(event) {\n      var response;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              event.preventDefault(); // keep browser from reloading when btn click\n\n              setValues(_objectSpread(_objectSpread({}, values), {}, {\n                loading: true\n              }));\n              _context.next = 4;\n              return doRequest();\n\n            case 4:\n              response = _context.sent;\n              setValues(_objectSpread(_objectSpread({}, values), {}, {\n                loading: false\n              }));\n\n              if (response && response.token) {\n                setValues(_objectSpread(_objectSpread({}, values), {}, {\n                  success: true\n                }));\n              }\n\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function clickSubmit(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return success ? /*#__PURE__*/_jsxDEV(Message, {\n    success: true,\n    header: \"Activation email sent to \".concat(email)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 5\n  }, _this) : /*#__PURE__*/_jsxDEV(Form, {\n    loading: loading,\n    children: /*#__PURE__*/_jsxDEV(Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Form.Input, {\n        onChange: handleChange(\"email\"),\n        value: email,\n        fluid: true,\n        placeholder: \"Email\",\n        type: \"email\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(Form.Input, {\n        onChange: handleChange(\"password\"),\n        value: password,\n        fluid: true,\n        placeholder: \"Password\",\n        type: \"Password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(Form.Checkbox, {\n        label: \"I agree to the Terms and Conditions\",\n        onChange: function onChange() {\n          return setValues(_objectSpread(_objectSpread({}, values), {}, {\n            agreeTos: !agreeTos\n          }));\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, _this), errors, /*#__PURE__*/_jsxDEV(Form.Button, {\n        color: \"linkedin\",\n        disabled: !agreeTos,\n        fluid: true,\n        onClick: clickSubmit,\n        children: \"Sign Up\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(Message, {\n        children: [\"We will not share your information with 3rd parties. Upon signup, you will receive an email to activate your account. For additional information, please review our\", \" \", /*#__PURE__*/_jsxDEV(Link, {\n          href: \"/admin/rfp/tos\",\n          children: \"Terms and Conditions\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, _this), \".\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(Signup, \"cAFxD4yIk2pumcJ841ymfyxXaf0=\", false, function () {\n  return [useRequest, useRouter];\n});\n\n_c = Signup;\nexport { Signup };\n\nvar _c;\n\n$RefreshReg$(_c, \"Signup\");","map":{"version":3,"sources":["/Users/rjb/Desktop/code/projects/rfp/client/components/auth/signup-basic.js"],"names":["useState","Fragment","useEffect","Form","Message","useRequest","useRouter","Link","Signup","createSitePermission","email","password","success","loading","agreeTos","values","setValues","url","query","site","method","body","doRequest","errors","handleChange","name","e","target","value","clickSubmit","event","preventDefault","response","token"],"mappings":"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","sourcesContent":["import { useState, Fragment, useEffect } from \"react\";\nimport { Form, Message } from \"semantic-ui-react\";\nimport { useRequest } from \"../../hooks/use-request\";\nimport { useRouter } from \"next/router\";\nimport Link from \"next/link\";\n\nconst Signup = ({ createSitePermission }) => {\n  const [values, setValues] = useState({\n    email: \"\",\n    password: \"\",\n    success: false,\n    loading: false,\n    agreeTos: false,\n  });\n\n  const { email, password, success, loading, agreeTos } = values;\n\n  const { doRequest, errors } = useRequest({\n    url: `/api/users/signup/${useRouter().query.site}`, // MUST CHANGE\n    method: \"post\",\n    body: {\n      email,\n      password,\n      createSitePermission,\n    },\n  });\n\n  const handleChange = (name) => (e) => {\n    setValues({ ...values, [name]: e.target.value });\n  };\n\n  const clickSubmit = async (event) => {\n    event.preventDefault(); // keep browser from reloading when btn click\n\n    setValues({ ...values, loading: true });\n\n    const response = await doRequest();\n\n    setValues({ ...values, loading: false });\n\n    if (response && response.token) {\n      setValues({ ...values, success: true });\n    }\n  };\n\n  return success ? (\n    <Message success header={`Activation email sent to ${email}`} />\n  ) : (\n    <Form loading={loading}>\n      <Fragment>\n        <Form.Input\n          onChange={handleChange(\"email\")}\n          value={email}\n          fluid\n          placeholder=\"Email\"\n          type=\"email\"\n        />\n        <Form.Input\n          onChange={handleChange(\"password\")}\n          value={password}\n          fluid\n          placeholder=\"Password\"\n          type=\"Password\"\n        />\n        <Form.Checkbox\n          label=\"I agree to the Terms and Conditions\"\n          onChange={() => setValues({ ...values, agreeTos: !agreeTos })}\n        />\n\n        {errors}\n        <Form.Button\n          color=\"linkedin\"\n          disabled={!agreeTos}\n          fluid\n          onClick={clickSubmit}\n        >\n          Sign Up\n        </Form.Button>\n        <Message>\n          We will not share your information with 3rd parties. Upon signup, you\n          will receive an email to activate your account. For additional\n          information, please review our{\" \"}\n          <Link href=\"/admin/rfp/tos\">Terms and Conditions</Link>.\n        </Message>\n      </Fragment>\n    </Form>\n  );\n};\n\nexport { Signup };\n"]},"metadata":{},"sourceType":"module"}