{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport Router, { useRouter } from \"next/router\";\nimport { useState } from \"react\";\nimport { Form, Input, TextArea, Divider, Header, Icon, Segment } from \"semantic-ui-react\";\nimport { buildClient } from \"../../../../api/build-client\";\nimport { useRequest } from \"../../../../hooks/use-request\";\nimport Layout from \"../../../../components/layouts\";\nimport EmailConfig from \"../../../../components/admin-site/email-config\";\n\nconst update = ({\n  site,\n  config\n}) => {\n  const {\n    0: values,\n    1: setValues\n  } = useState({\n    title: site.title,\n    homeTitle: site.homeTitle,\n    tagline: site.tagline,\n    aboutUsTitle: site.aboutUsTitle,\n    aboutUsBlurb: site.aboutUsBlurb,\n    loading: false,\n    privacyPolicy: site.privacyPolicy,\n    termsOfService: site.termsOfService,\n    servicesPageHeadline: site.servicesPageHeadline,\n    servicesPageSubheadline: site.servicesPageSubheadline\n  });\n  const {\n    doRequest,\n    errors,\n    errMsgArr\n  } = useRequest({\n    url: `/api/site/${useRouter().query.site}`,\n    // MUST CHANGE\n    method: \"put\",\n    body: {\n      title: values.title,\n      homeTitle: values.homeTitle,\n      tagline: values.tagline,\n      aboutUsBlurb: values.aboutUsBlurb,\n      aboutUsTitle: values.aboutUsTitle,\n      privacyPolicy: values.privacyPolicy,\n      termsOfService: values.termsOfService,\n      servicesPageHeadline: values.servicesPageHeadline,\n      servicesPageSubheadline: values.servicesPageSubheadline\n    },\n    onSuccess: () => Router.push(`/user/${values.title}`)\n  });\n\n  const handleChange = name => e => {\n    setValues(_objectSpread(_objectSpread({}, values), {}, {\n      [name]: e.target.value\n    }));\n  };\n\n  const clickSubmit = async event => {\n    event.preventDefault(); // keep browser from reloading when btn click\n\n    setValues(_objectSpread(_objectSpread({}, values), {}, {\n      loading: true\n    }));\n    await doRequest();\n    setValues(_objectSpread(_objectSpread({}, values), {}, {\n      loading: false\n    }));\n  };\n\n  return /*#__PURE__*/_jsxs(Layout, {\n    smallLeaderboard: true,\n    leaderboardData: {\n      header: \"Website Details\",\n      subHeader: \"Update the content and configuration of your website\",\n      dividerText: \"Configure\"\n    },\n    heightOverride: \"1500px\",\n    children: [/*#__PURE__*/_jsxs(Form, {\n      onSubmit: clickSubmit,\n      loading: values.loading,\n      children: [/*#__PURE__*/_jsx(\"br\", {}), errors, /*#__PURE__*/_jsxs(Form.Field, {\n        error: errMsgArr && errMsgArr.includes(\"This title has been reserved by another user.\"),\n        children: [/*#__PURE__*/_jsx(\"label\", {\n          children: \"Site Title \"\n        }), /*#__PURE__*/_jsx(Input, {\n          style: {\n            maxWidth: \"300px\"\n          },\n          label: \".10gotech.com\",\n          labelPosition: \"right\",\n          value: values.title,\n          placeholder: values.title || \"Your title\",\n          onChange: handleChange(\"title\")\n        })]\n      }), /*#__PURE__*/_jsxs(Form.Field, {\n        children: [/*#__PURE__*/_jsx(\"label\", {\n          children: \"Header\"\n        }), /*#__PURE__*/_jsx(Input, {\n          value: values.homeTitle,\n          placeholder: values.homeTitle || \"Your headline\",\n          onChange: handleChange(\"homeTitle\")\n        })]\n      }), /*#__PURE__*/_jsxs(Form.Field, {\n        children: [/*#__PURE__*/_jsx(\"label\", {\n          children: \"Sub header\"\n        }), /*#__PURE__*/_jsx(Input, {\n          value: values.tagline,\n          placeholder: values.tagline || \"Your tagline\",\n          onChange: handleChange(\"tagline\")\n        })]\n      }), /*#__PURE__*/_jsxs(Form.Field, {\n        children: [/*#__PURE__*/_jsx(\"label\", {\n          children: \"Section Header\"\n        }), /*#__PURE__*/_jsx(Input, {\n          value: values.aboutUsTitle,\n          placeholder: values.aboutUsTitle || \"Your About Us Header\",\n          onChange: handleChange(\"aboutUsTitle\")\n        })]\n      }), /*#__PURE__*/_jsxs(Form.Field, {\n        children: [/*#__PURE__*/_jsx(\"label\", {\n          children: \"Section Paragraph\"\n        }), /*#__PURE__*/_jsx(TextArea, {\n          value: values.aboutUsBlurb,\n          placeholder: values.aboutUsBlurb || \"Your About Us Paragraph\",\n          onChange: handleChange(\"aboutUsBlurb\")\n        })]\n      }), /*#__PURE__*/_jsx(Divider, {\n        horizontal: true,\n        children: /*#__PURE__*/_jsxs(Header, {\n          as: \"h4\",\n          children: [/*#__PURE__*/_jsx(Icon, {\n            name: \"money\"\n          }), \"Services\"]\n        })\n      }), \" \", /*#__PURE__*/_jsxs(Form.Field, {\n        children: [/*#__PURE__*/_jsx(\"label\", {\n          children: \"Enter new services page headline\"\n        }), /*#__PURE__*/_jsx(Input, {\n          value: values.servicesPageHeadline,\n          placeholder: values.servicesPageHeadline || \"Enter new services page headline...\",\n          onChange: handleChange(\"servicesPageHeadline\")\n        })]\n      }), /*#__PURE__*/_jsxs(Form.Field, {\n        children: [/*#__PURE__*/_jsx(\"label\", {\n          children: \"Enter new services page subheadline\"\n        }), /*#__PURE__*/_jsx(Input, {\n          value: values.servicesPageSubheadline,\n          placeholder: values.servicesPageSubheadline || \"Enter new services page subheadline...\",\n          onChange: handleChange(\"servicesPageSubheadline\")\n        })]\n      }), /*#__PURE__*/_jsx(Divider, {\n        horizontal: true,\n        children: /*#__PURE__*/_jsxs(Header, {\n          as: \"h4\",\n          children: [/*#__PURE__*/_jsx(Icon, {\n            name: \"law\"\n          }), \"Legal\"]\n        })\n      }), \" \", /*#__PURE__*/_jsxs(Form.Field, {\n        children: [/*#__PURE__*/_jsx(\"label\", {\n          children: \"Custom privacy policy for your website\"\n        }), /*#__PURE__*/_jsx(TextArea, {\n          value: values.privacyPolicy,\n          placeholder: values.privacyPolicy || \"Enter new privacy policy...\",\n          onChange: handleChange(\"privacyPolicy\")\n        })]\n      }), /*#__PURE__*/_jsxs(Form.Field, {\n        children: [/*#__PURE__*/_jsx(\"label\", {\n          children: \"Custom terms of service for your website\"\n        }), /*#__PURE__*/_jsx(TextArea, {\n          value: values.termsOfService,\n          placeholder: values.termsOfService || \"Enter new terms of service...\",\n          onChange: handleChange(\"termsOfService\")\n        })]\n      }), /*#__PURE__*/_jsx(Form.Button, {\n        floated: \"right\",\n        children: \"Update\"\n      })]\n    }), /*#__PURE__*/_jsx(EmailConfig, {\n      config: config\n    })]\n  });\n};\n\nupdate.getInitialProps = async context => {\n  const {\n    data: site\n  } = await buildClient(context).get(`/api/site/${context.query.site}`);\n  const {\n    data: config\n  } = await buildClient(context).get(`/api/notification/config/${context.query.site}`);\n  return {\n    site,\n    config\n  };\n};\n\nexport default update;","map":null,"metadata":{},"sourceType":"module"}