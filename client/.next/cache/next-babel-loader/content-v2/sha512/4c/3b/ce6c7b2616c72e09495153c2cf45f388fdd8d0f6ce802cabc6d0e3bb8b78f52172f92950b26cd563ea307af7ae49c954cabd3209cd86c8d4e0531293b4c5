{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _regeneratorRuntime from \"/Users/rjb/Desktop/code/projects/rfp/client/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/rjb/Desktop/code/projects/rfp/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"/Users/rjb/Desktop/code/projects/rfp/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport Router, { useRouter } from \"next/router\";\nimport { useState } from \"react\";\nimport { Form, Input, TextArea, Divider, Header, Icon, Segment } from \"semantic-ui-react\";\nimport { buildClient } from \"../../../../api/build-client\";\nimport { useRequest } from \"../../../../hooks/use-request\";\nimport Layout from \"../../../../components/layouts\";\nimport EmailConfig from \"../../../../components/admin-site/email-config\";\n\nvar update = function update(_ref) {\n  var site = _ref.site,\n      config = _ref.config;\n\n  var _useState = useState({\n    title: site.title,\n    homeTitle: site.homeTitle,\n    tagline: site.tagline,\n    aboutUsTitle: site.aboutUsTitle,\n    aboutUsBlurb: site.aboutUsBlurb,\n    loading: false,\n    privacyPolicy: site.privacyPolicy,\n    termsOfService: site.termsOfService,\n    servicesPageHeadline: site.servicesPageHeadline,\n    servicesPageSubheadline: site.servicesPageSubheadline\n  }),\n      values = _useState[0],\n      setValues = _useState[1];\n\n  var _useRequest = useRequest({\n    url: \"/api/site/\".concat(useRouter().query.site),\n    // MUST CHANGE\n    method: \"put\",\n    body: {\n      title: values.title,\n      homeTitle: values.homeTitle,\n      tagline: values.tagline,\n      aboutUsBlurb: values.aboutUsBlurb,\n      aboutUsTitle: values.aboutUsTitle,\n      privacyPolicy: values.privacyPolicy,\n      termsOfService: values.termsOfService,\n      servicesPageHeadline: values.servicesPageHeadline,\n      servicesPageSubheadline: values.servicesPageSubheadline\n    },\n    onSuccess: function onSuccess() {\n      return Router.push(\"/user/\".concat(values.title));\n    }\n  }),\n      doRequest = _useRequest.doRequest,\n      errors = _useRequest.errors,\n      errMsgArr = _useRequest.errMsgArr;\n\n  var handleChange = function handleChange(name) {\n    return function (e) {\n      setValues(_objectSpread(_objectSpread({}, values), {}, _defineProperty({}, name, e.target.value)));\n    };\n  };\n\n  var clickSubmit = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(event) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              event.preventDefault(); // keep browser from reloading when btn click\n\n              setValues(_objectSpread(_objectSpread({}, values), {}, {\n                loading: true\n              }));\n              _context.next = 4;\n              return doRequest();\n\n            case 4:\n              setValues(_objectSpread(_objectSpread({}, values), {}, {\n                loading: false\n              }));\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function clickSubmit(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxs(Layout, {\n    smallLeaderboard: true,\n    leaderboardData: {\n      header: \"Website Details\",\n      subHeader: \"Update the content and configuration of your website\",\n      dividerText: \"Configure\"\n    },\n    heightOverride: \"1500px\",\n    children: [/*#__PURE__*/_jsxs(Form, {\n      onSubmit: clickSubmit,\n      loading: values.loading,\n      children: [/*#__PURE__*/_jsx(\"br\", {}), errors, /*#__PURE__*/_jsxs(Form.Field, {\n        error: errMsgArr && errMsgArr.includes(\"This title has been reserved by another user.\"),\n        children: [/*#__PURE__*/_jsx(\"label\", {\n          children: \"Site Title \"\n        }), /*#__PURE__*/_jsx(Input, {\n          style: {\n            maxWidth: \"300px\"\n          },\n          label: \".10gotech.com\",\n          labelPosition: \"right\",\n          value: values.title,\n          placeholder: values.title || \"Your title\",\n          onChange: handleChange(\"title\")\n        })]\n      }), /*#__PURE__*/_jsxs(Form.Field, {\n        children: [/*#__PURE__*/_jsx(\"label\", {\n          children: \"Header\"\n        }), /*#__PURE__*/_jsx(Input, {\n          value: values.homeTitle,\n          placeholder: values.homeTitle || \"Your headline\",\n          onChange: handleChange(\"homeTitle\")\n        })]\n      }), /*#__PURE__*/_jsxs(Form.Field, {\n        children: [/*#__PURE__*/_jsx(\"label\", {\n          children: \"Sub header\"\n        }), /*#__PURE__*/_jsx(Input, {\n          value: values.tagline,\n          placeholder: values.tagline || \"Your tagline\",\n          onChange: handleChange(\"tagline\")\n        })]\n      }), /*#__PURE__*/_jsxs(Form.Field, {\n        children: [/*#__PURE__*/_jsx(\"label\", {\n          children: \"Section Header\"\n        }), /*#__PURE__*/_jsx(Input, {\n          value: values.aboutUsTitle,\n          placeholder: values.aboutUsTitle || \"Your About Us Header\",\n          onChange: handleChange(\"aboutUsTitle\")\n        })]\n      }), /*#__PURE__*/_jsxs(Form.Field, {\n        children: [/*#__PURE__*/_jsx(\"label\", {\n          children: \"Section Paragraph\"\n        }), /*#__PURE__*/_jsx(TextArea, {\n          value: values.aboutUsBlurb,\n          placeholder: values.aboutUsBlurb || \"Your About Us Paragraph\",\n          onChange: handleChange(\"aboutUsBlurb\")\n        })]\n      }), /*#__PURE__*/_jsx(Divider, {\n        horizontal: true,\n        children: /*#__PURE__*/_jsxs(Header, {\n          as: \"h4\",\n          children: [/*#__PURE__*/_jsx(Icon, {\n            name: \"money\"\n          }), \"Services\"]\n        })\n      }), \" \", /*#__PURE__*/_jsxs(Form.Field, {\n        children: [/*#__PURE__*/_jsx(\"label\", {\n          children: \"Enter new services page headline\"\n        }), /*#__PURE__*/_jsx(Input, {\n          value: values.servicesPageHeadline,\n          placeholder: values.servicesPageHeadline || \"Enter new services page headline...\",\n          onChange: handleChange(\"servicesPageHeadline\")\n        })]\n      }), /*#__PURE__*/_jsxs(Form.Field, {\n        children: [/*#__PURE__*/_jsx(\"label\", {\n          children: \"Enter new services page subheadline\"\n        }), /*#__PURE__*/_jsx(Input, {\n          value: values.servicesPageSubheadline,\n          placeholder: values.servicesPageSubheadline || \"Enter new services page subheadline...\",\n          onChange: handleChange(\"servicesPageSubheadline\")\n        })]\n      }), /*#__PURE__*/_jsx(Divider, {\n        horizontal: true,\n        children: /*#__PURE__*/_jsxs(Header, {\n          as: \"h4\",\n          children: [/*#__PURE__*/_jsx(Icon, {\n            name: \"law\"\n          }), \"Legal\"]\n        })\n      }), \" \", /*#__PURE__*/_jsxs(Form.Field, {\n        children: [/*#__PURE__*/_jsx(\"label\", {\n          children: \"Custom privacy policy for your website\"\n        }), /*#__PURE__*/_jsx(TextArea, {\n          value: values.privacyPolicy,\n          placeholder: values.privacyPolicy || \"Enter new privacy policy...\",\n          onChange: handleChange(\"privacyPolicy\")\n        })]\n      }), /*#__PURE__*/_jsxs(Form.Field, {\n        children: [/*#__PURE__*/_jsx(\"label\", {\n          children: \"Custom terms of service for your website\"\n        }), /*#__PURE__*/_jsx(TextArea, {\n          value: values.termsOfService,\n          placeholder: values.termsOfService || \"Enter new terms of service...\",\n          onChange: handleChange(\"termsOfService\")\n        })]\n      }), /*#__PURE__*/_jsx(Form.Button, {\n        floated: \"right\",\n        children: \"Update\"\n      })]\n    }), /*#__PURE__*/_jsx(EmailConfig, {\n      config: config\n    })]\n  });\n};\n\nupdate.getInitialProps = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(context) {\n    var _yield$buildClient$ge, site, _yield$buildClient$ge2, config;\n\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return buildClient(context).get(\"/api/site/\".concat(context.query.site));\n\n          case 2:\n            _yield$buildClient$ge = _context2.sent;\n            site = _yield$buildClient$ge.data;\n            _context2.next = 6;\n            return buildClient(context).get(\"/api/notification/config/\".concat(context.query.site));\n\n          case 6:\n            _yield$buildClient$ge2 = _context2.sent;\n            config = _yield$buildClient$ge2.data;\n            return _context2.abrupt(\"return\", {\n              site: site,\n              config: config\n            });\n\n          case 9:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n\n  return function (_x2) {\n    return _ref3.apply(this, arguments);\n  };\n}();\n\nexport default update;","map":null,"metadata":{},"sourceType":"module"}